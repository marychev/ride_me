#:import Factory kivy.factory.Factory

#:import BorderImage kivy.graphics.vertex_instructions.BorderImage
#:import Line kivy.graphics.vertex_instructions.Line
#:import Rectangle kivy.graphics.vertex_instructions.Rectangle
#:import Currency objects.currency.currency.Currency
#:import UColor utils.color.Color
#:import FS conf.FontSize



<UpgradePopup@Popup>:
    auto_dismiss: False
    size_hint: .8, .8
    title: 'Title of the upgrade popup'

    BoxLayout:
        orientation: 'vertical'

        Label:
            text: 'Description of the upgrade popup. \r\n Blas blas bla blablas bla blablas bla blablas bla bla'
            multiline: True
            font_size: FS.LEAD.value

        BoxLayout:
            size_hint_y: .5
            padding: 10
            Button:
                text: 'Ok'
                on_release: root.dismiss()
            Button:
                text: 'Close'
                on_press: root.dismiss()


<CharBtn@Button>:
    disabled: True
    opacity: 0.1
    font_size: FS.XSMALL.value
    disabled: True
    size_hint_x: None
    width: self.size[0]
    on_release: Factory.UpgradePopup().open()

<CharacterWrap>:
    orientation: "vertical"
    height: '40dp'
    width: int(Window.width/4)
    size_hint: None, None
    item: self.item
    has_value: self.has_value
    key: self.key
    title: self.title
    value: self.value
    max: self.max

    BoxLayout:
        Label:
            text: RightPanelBtn.format_title_right_panel(root, root.key, root.value, root.max) if root.has_value else root.title
            color: UColor.hex(UColor.GRAY)
            font_size: FS.NORMAL.value
            markup: True
        CharBtn:
            text: "Upgrade"
            opacity: self.opacity if root.has_value else 0


    BoxLayout:
        orientation: "vertical"
        ProgressBar:
            height: root.parent.height - 30
            size_hint: 1, None
            # pos: (root.pos[0], root.pos[1]) if root.has_value else (0, 0)
            value: int(root.value)
            max: int(root.max) + 100

            canvas:
                Color:
                    rgba: 0, 0, 0, .8
                Line:
                    points: self.x, self.y+35, self.x + self.parent.width, self.y+35
                    width: 1 if root.has_value else 2
